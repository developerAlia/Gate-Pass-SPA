<div
  class="row"
  [formGroup]="drivingLicenseDetails"
  *ngIf="drivingLicenseDetails"
>
  <fieldset
    class="form-group border col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-4"
  >
    <legend class="w-auto px-2">
      <h5>{{ "DrivingLicenseDetails" | translate }}</h5>
    </legend>

    <div class="row">
      <div
        class="col-xs-12 col-sm-12 col-md-6 col-lg-6"
        *ngIf="this.numOfDays > 14"
      >
        <label for="ExpiryDate">
          {{ "ExpiryDate" | translate }} <span class="font-danger">*</span>
        </label>

        <app-date-picker
          [formControl]="drivingLicenseDetails.controls['expairyDate']"
          [label]="'ExpiryDate' | translate"
          [minDate]="this.minDate"
          [readonlyStatus]="
            !this.drivingLicenseDetails.controls['expairyDate'].disabled
          "
        >
        </app-date-picker>
      </div>

      <div *ngIf="this.numOfDays > 14">
        <div
          class="col-xs-12 col-sm-12 col-md-6 col-lg-6"
          *ngIf="
            (this.drivingLicenseDetails.get('isExpire').value == true &&
              this.drivingLicenseDetails.get('licenseURL').value != null &&
              this.isSecurity == false &&
              this.drivingLicenseDetails.get('isEdit').value == true &&
              this.vehicleDetails.get('registrationAttach').disabled != true) ||
            (this.drivingLicenseDetails.get('licenseURL').value == null &&
              this.drivingLicenseDetails.get('isExpire').value == true &&
              this.isSecurity == false &&
              this.drivingLicenseDetails.get('isEdit').value == true &&
              this.vehicleDetails.get('registrationAttach').disabled != true) ||
            (this.drivingLicenseDetails.get('licenseURL').value == null &&
              this.drivingLicenseDetails.get('isExpire').value == false &&
              this.isSecurity == false &&
              this.drivingLicenseDetails.get('isEdit').value == true &&
              this.vehicleDetails.get('registrationAttach').disabled != true)
          "
        >
          <!-- 11223322 -->
          <label for="name"
            >{{ "DrivingLicenseAttachment" | translate }}
            <span class="font-danger">*</span>:</label
          >
          <app-upload-file
            [formControl]="drivingLicenseDetails.controls['licenseAttach']"
            [label]="'DrivingLicenseAttachment'"
            required
            [fileType]="'PDF'"
            (change)="
              checkFileSize(
                $event.target.files,
                'drivingLicenseDetails.licenseAttach',
                true
              )
            "
          ></app-upload-file>
        </div>

      </div>

      <div
        class="col-xs-12 col-sm-12 col-md-6 col-lg-6 mt-2"
        *ngIf="isSecurity"
      >
        <label for="name">{{ "DrivingLicenseAttachment" | translate }}:</label>
        <div>
          <a
            href="javascript:void(0)"
            id="viewAttachment"
            name="viewAttachment"
            ngbTooltip="View Document"
            class="mt-1"
            ><i
              class="fa fa-file-pdf-o"
              style="font-size: 1.73em"
              (click)="getAttachmentFile()"
            ></i
          ></a>
        </div>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mb-4 mt-4">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <label for="name"
              >{{ "PlateNumber" | translate }}
              <span class="font-danger">*</span>:</label
            >
            <app-text-input
              class="bg-color-white"
              [formControl]="vehicleDetails.controls['plateNumber']"
              (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
              [type]="number"
              [label]="'PlateNumber' | translate"
            >
            </app-text-input>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <label for="name"
              >{{ "PlateCode" | translate }}
              <span class="font-danger">*</span>:</label
            >

            <app-plate-code-autocomplete
              [formControl]="vehicleDetails.controls['zPlateCodeId']"
              [selectedId]="this.vehicleDetails.get('zPlateCodeId').value"
            ></app-plate-code-autocomplete>
          </div>
        </div>
      </div>
    </div>
  </fieldset>

  <!-- <div
    class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-4"
    *ngIf="this.isSecurity"
  >
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="form-group">
          <div class="form-check">
            <input
              class="form-check-input"
              id="gridCheck"
              type="checkbox"
              [disabled]="false"
              [formControl]="
                drivingLicenseDetails.controls['securitySide'].controls[
                  'isverified'
                ]
              "
            />
            <label class="form-check-label" for="gridCheck">{{
              "VERIFIED" | translate
            }}</label>
          </div>
        </div>
      </div>

      <div
        class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-4"
        *ngIf="
          drivingLicenseDetails.get('securitySide.isverified').value == false
        "
      >
        <label for="Note">{{ "Note" | translate }}:</label>
        <app-text-area
          [formControl]="
            drivingLicenseDetails.controls['securitySide'].controls['notes']
          "
        ></app-text-area>
      </div>
    </div>
  </div> -->

  <!-- Offical Use Only -->

  <fieldset
    class="form-group border col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-4"
    *ngIf="
      this.isSecurity ||
      (drivingLicenseDetails.value.isEdit == true &&
        drivingLicenseDetails.value.requestsId != 0)
    "
  >
    <legend class="w-auto px-2">
      <h5>{{ "OfficalUseOnly" | translate }}</h5>
    </legend>
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mb-4">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <check-box
              [formControl]="
                drivingLicenseDetails.controls['securitySide'].controls[
                  'isverified'
                ]
              "
              [id]="'drivingLicenseDetailsCheckBox'"
            ></check-box>
          </div>

          <div
            class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-2"
            *ngIf="!drivingLicenseDetails.get('securitySide.isverified').value"
          >
            <label for="Note"
              >{{ "Note" | translate }}
              <span class="font-danger">*</span>:</label
            >
            <app-text-area
              [formControl]="
                drivingLicenseDetails.controls['securitySide'].controls['notes']
              "
            ></app-text-area>
          </div>
        </div>
      </div>
    </div>
  </fieldset>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <div class="row mt-4">
      <div
        class="col-xs-6 col-sm-6 col-md-6 col-lg-6 d-flex justify-content-start"
      >
        <button class="btn btn-light mr-1" type="button" awPreviousStep>
          Back
        </button>
        <!-- <button
          class="btn btn-light mr-1"
          type="button"
          (click)="testViDet()"
        >
          Test
        </button> -->
      </div>
      <div
        class="col-xs-6 col-sm-6 col-md-6 col-lg-6 d-flex justify-content-end"
      >
        <button
          *ngIf="
            this.isSecurity == false &&
            drivingLicenseDetails.value.isEdit == true
          "
          class="btn btn-primary mr-1"
          type="button"
          [disabled]="
            !this.drivingLicenseDetails.valid == true ||
            this.vehicleDetails.get('plateNumber').value == null ||
            this.vehicleDetails.get('zPlateCodeId').value == null
          "
          (click)="postDrivingLicense()"
          awNextStep
        >
          <!--  && -->
          Next
        </button>
        <button
          class="btn btn-primary mr-1"
          type="button"
          *ngIf="vehicleDetails.value.isEdit == false && isSecurity == false"
          awNextStep
        >
          {{ "NEXT" | translate }}
        </button>

        <button
          *ngIf="this.isSecurity"
          class="btn btn-primary mr-1"
          type="button"
          [disabled]="!this.drivingLicenseDetails.get('securitySide').valid"
          (click)="verifyDrivingLicense()"
        >
          Next
        </button>
      </div>
    </div>
  </div>
</div>
